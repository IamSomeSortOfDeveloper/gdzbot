from aiogram.types import FSInputFile
from dotenv import load_dotenv, find_dotenv
from aiogram import Bot, Dispatcher
from openai import AsyncOpenAI
import os

load_dotenv(find_dotenv())

base_aunt = os.getenv('DATABASE_AUTH')
bot = Bot(os.getenv('TOKEN'))
dp = Dispatcher()
openai_key = os.getenv('OPEN_AI_KEY')

admin_id = 307129157
price_sub = 100

start_photo = FSInputFile('start_photo.jpg')
nosub_photo = FSInputFile('pay_photo.jpg')
success_pay_photo = FSInputFile('success_pay_photo.jpg')

client = AsyncOpenAI(
    api_key = openai_key
)

promt_ai_text = '''
–¢—ã ‚Äî –æ–ø—ã—Ç–Ω—ã–π —à–∫–æ–ª—å–Ω—ã–π —É—á–∏—Ç–µ–ª—å —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º —Å—Ç–∞–∂–µ–º, —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–±–∏—Ä–∞—é—â–∏–π—Å—è –≤ –∑–∞–¥–∞–Ω–∏—è—Ö –ø–æ —à–∫–æ–ª—å–Ω–æ–π –∏ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –∑–∞–¥–∞–Ω–∏–µ ‚Äî —Ç–≤–æ—è –∑–∞–¥–∞—á–∞:
1. –ü–æ–Ω—è—Ç—å, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –ª–∏ –æ–Ω–æ –∫ —É—á–µ–±–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–µ.
2. –ï—Å–ª–∏ —ç—Ç–æ —É—á–µ–±–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è, —Ä—É—Å—Å–∫–∏–π –∏ —Ç.–¥.) –∏ –¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, —Ç–æ—á–Ω—ã–π –∏ –∫—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç.
3. –ï—Å–ª–∏ —ç—Ç–æ —Ç–µ—Å—Ç —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ ‚Äî –≤—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.
4. –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –∑–∞–¥–∞–Ω–∏–µ (—à—É—Ç–∫–∞, –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –æ—Ñ—Ñ—Ç–æ–ø) ‚Äî –≤–µ–∂–ª–∏–≤–æ –æ—Ç–≤–µ—Ç—å, —á—Ç–æ –±–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–º–æ—â–∏ —Å —É—á—ë–±–æ–π.

–ù–µ –¥–∞–≤–∞–π –æ–±—ä—è—Å–Ω–µ–Ω–∏–π, –µ—Å–ª–∏ –æ–± —ç—Ç–æ–º —è–≤–Ω–æ –Ω–µ –ø—Ä–æ—Å—è—Ç.  
–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –≤–≤–æ–¥–Ω—ã–µ —Ñ—Ä–∞–∑—ã ‚Äî —Å—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ —Å—É—Ç–∏.  
–û—Ç–≤–µ—á–∞–π —É–≤–µ—Ä–µ–Ω–Ω–æ, –∫–∞–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —Ä–∞–±–æ—Ç—É.
'''

# promt_ai_photo = '''
# –¢—ã ‚Äî —É–º–Ω—ã–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ò–ò, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –±—ã–ª –ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –∫ —É—á–µ–±–Ω–æ–º—É –∑–∞–¥–∞–Ω–∏—é.

# –û–±—ä—è—Å–Ω–∏ —Ä–µ—à–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ –±—É–¥—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—à—å –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫—É:
# ‚Äî –±–µ–∑ –∑–∞—É–º–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤,
# ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏,
# ‚Äî –ø–æ —à–∞–≥–∞–º, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.

# –ù–µ –ø–∏—à–∏ –∑–∞–Ω–æ–≤–æ –≤–µ—Å—å –æ—Ç–≤–µ—Ç. –ü—Ä–æ—Å—Ç–æ –æ–±—ä—è—Å–Ω–∏, –ø–æ—á–µ–º—É –æ—Ç–≤–µ—Ç –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π.  
# –ù–µ –ø–∏—à–∏ ‚Äú–∫–æ–Ω–µ—á–Ω–æ!‚Äù, ‚Äú–¥–∞–≤–∞–π –æ–±—ä—è—Å–Ω—é‚Äù ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏ —Å—Ä–∞–∑—É –∫ —Å—É—Ç–∏.  
# –°—Ç–∞—Ä–∞–π—Å—è –Ω–µ –ø—Ä–µ–≤—ã—à–∞—Ç—å 4‚Äì5 –∫–æ—Ä–æ—Ç–∫–∏—Ö –∞–±–∑–∞—Ü–µ–≤.
# '''

start_message = '''
‚úã –ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî —Ç–≤–æ–π –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —É—á–µ–±–µ.
–ü—Ä–æ—Å—Ç–æ –ø—Ä–∏—à–ª–∏ üì∏ —Ñ–æ—Ç–æ –∏–ª–∏ ‚úçÔ∏è —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è, –∏ —è –≤—Å—ë —Ä–µ—à—É –∑–∞ —Ç–µ–±—è.

üîπ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É, —Ä—É—Å—Å–∫–∏–π, —Ñ–∏–∑–∏–∫—É, —Ö–∏–º–∏—é, –∏—Å—Ç–æ—Ä–∏—é –∏ –¥—Ä.
üîπ –û—Ç–≤–µ—á–∞—é —Å—Ä–∞–∑—É. –ï—Å—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ –∂–µ–ª–∞–Ω–∏—é.

‚¨áÔ∏è –ü–æ–ø—Ä–æ–±—É–π —Å–µ–π—á–∞—Å ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—à–ª–∏ –ª—é–±–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–º
'''

time_break_ai = '''
ü§î –î–∞–π –º–Ω–µ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥—É–º–∞—Ç—å, —Å–µ–π—á–∞—Å –≤—Å–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ!
'''

def send_reshenie(message, count):
    return f'''
    ‚úÖ –ì–æ—Ç–æ–≤–æ! –í–æ—Ç —Ä–µ—à–µ–Ω–∏–µ:
    <i>{message}</i>

    <b>–£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å <b>{count}</b> –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</b>

    üß† –•–æ—á–µ—à—å, –æ–±—ä—è—Å–Ω—é, –∫–∞–∫ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç—Å—è?  
    üëâ –ù–∞–∂–º–∏ "üìò –û–±—ä—è—Å–Ω–∏ —Ä–µ—à–µ–Ω–∏–µ"
    '''

def send_reshenie_sub(message):
    return f'''
    ‚úÖ –ì–æ—Ç–æ–≤–æ! –í–æ—Ç —Ä–µ—à–µ–Ω–∏–µ:
    <i>{message}</i>

    üß† –•–æ—á–µ—à—å, –æ–±—ä—è—Å–Ω—é, –∫–∞–∫ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç—Å—è?  
    üëâ –ù–∞–∂–º–∏ "üìò –û–±—ä—è—Å–Ω–∏ —Ä–µ—à–µ–Ω–∏–µ"
    '''

popitka_nofree = '''
üõë –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å.

‚ö°Ô∏è –•–æ—á–µ—à—å —Ä–µ—à–∞—Ç—å –ª—é–±—ã–µ –∑–∞–¥–∞–Ω–∏—è ‚Äî –ø–æ —Ñ–æ—Ç–æ –∏ —Ç–µ–∫—Å—Ç—É –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π?

üî• –û—Ñ–æ—Ä–º–∏ –ø–æ–¥–ø–∏—Å–∫—É ‚Äî –≤—Å–µ–≥–æ –∑–∞ <s>10</s>‚≠êÔ∏è‚Üí 3‚≠êÔ∏è –≤ –¥–µ–Ω—å. –°–∫–∏–¥–∫–∞ 70% –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!

üìå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —à–∫–æ–ª—å–Ω—ã—Ö –∏ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
üì∏ –ó–∞–¥–∞—á–∏ –ø–æ —Ñ–æ—Ç–æ, —Ç–µ—Å—Ç—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏, —Å–ª–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
ü§ñ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–∞–º–æ–π –º–æ—â–Ω–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ (GPT-4.1)
‚è±Ô∏è –û—Ç–≤–µ—Ç—ã –∑–∞ —Å–µ–∫—É–Ω–¥—ã, –±–µ–∑ –æ—á–µ—Ä–µ–¥–µ–π –∏ –ª–∏–º–∏—Ç–æ–≤

üéÅ –ü–µ—Ä–≤—ã–µ 3 –¥–Ω—è ‚Äî –≤ –ø–æ–¥–∞—Ä–æ–∫
üîì –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
'''

timetomorrow_text = '''
üò¥ –û–∫–µ–π, —Ç–æ–≥–¥–∞ –æ—Ç–¥–æ—Ö–Ω—ë–º!

üìÖ –ó–∞–≤—Ç—Ä–∞ —Ç—ã —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∏—à—å 2 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è.
–ê –ø–æ–∫–∞ –º–æ–∂–µ—à—å –ø–æ–¥—É–º–∞—Ç—å ‚Äî —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–µ—Ä–≤–æ–≤ —Å—ç–∫–æ–Ω–æ–º–∏—à—å —Å –±–µ–∑–ª–∏–º–∏—Ç–æ–º.

üéÅ –ü–æ–¥–ø–∏—Å–∫–∞ –≤—Å–µ–≥–æ 3‚≠êÔ∏è –≤ –¥–µ–Ω—å
‚ö°Ô∏è –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
üì∏ –†–µ—à–µ–Ω–∏—è –ø–æ —Ñ–æ—Ç–æ
ü§ñ –°–∞–º–∞—è –º–æ—â–Ω–∞—è –Ω–µ–π—Ä–æ—Å–µ—Ç—å GPT-4.1

–ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ ‚Äî —è –Ω–∞ –º–µ—Å—Ç–µ üòâ
'''

success_pay_text = '''
‚úÖ –ì–æ—Ç–æ–≤–æ! –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ üéâ
–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å —Ä–µ—à–∞—Ç—å –ª—é–±—ã–µ –∑–∞–¥–∞–Ω–∏—è ‚Äî –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
üì∏ –û—Ç–ø—Ä–∞–≤–ª—è–π —Ñ–æ—Ç–æ –∏–ª–∏ —Ç–µ–∫—Å—Ç ‚Äî –∏ –ø–æ–ª—É—á–∞–π –æ—Ç–≤–µ—Ç –∑–∞ —Å–µ–∫—É–Ω–¥—ã.

–£–¥–∞—á–∏! –Ø –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏ ü§ñ
'''

xuyna_text = '''
ü§î –ü–æ—Ö–æ–∂–µ, —Ç—ã —Ö–æ—á–µ—à—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ?

–ß—Ç–æ–±—ã –≤—Å—ë —Å—Ä–∞–±–æ—Ç–∞–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ üëá
'''

review_text = '''
üí¨ –ï—Å—Ç—å –ø–∞—Ä–∞ —Å–µ–∫—É–Ω–¥?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –±—ã–ª–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –Ω–µ—É–¥–æ–±–Ω–æ, –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ —Ñ—É–Ω–∫—Ü–∏–π ‚Äî –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—à—å —á—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞—Ç—å üëâ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∏ –æ—Å—Ç–∞–≤—å –æ—Ç–∑—ã–≤.

üì© –ú—ã —á–∏—Ç–∞–µ–º –≤—Å—ë. –≠—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º —Å—Ç–∞—Ç—å –ª—É—á—à–µ.
'''